!function(){"use strict";function e(){}function t(e,t){e.clearRect(0,0,l.width,l.height),e.globalCompositeOperation="multiply";for(var n=e.createLinearGradient(0,0,t.width,0),a=document.getElementById("colour-div").getElementsByTagName("input"),o=0;o<a.length;o++)a.length>1?(n.addColorStop(o/(a.length-1),a[o].value),console.log(a[o].value)):n=a[o].value,L[o]=a[o].value;e.fillStyle=n,e.beginPath(),e.fillRect(0,0,t.width,t.height),e.closePath(),e.fill(),e.beginPath();var i=e.createLinearGradient(0,0,0,l.height);i.addColorStop(0,"#fff"),i.addColorStop(1,"#ccc"),e.fillStyle=i,e.fillRect(0,0,l.width,l.height),e.closePath(),e.fill(),e.globalCompositeOperation="source-over",e==E?y=e:(y.getImageData(0,0,1,1).data[3]<255||y.getImageData(t.width-1,t.height-1,1,1).data[3]<255)&&e.clearRect(0,0,t.width,t.height)}function n(){var e=canvas.toDataURL();v.href=e}function a(e,t){for(var n,a,o,i,u=function(e,t){e<0&&(e=0),e>l.width-1&&(e=l.width-1),t<0&&(t=0),t>l.height-1&&(t=l.height-1),n=y.getImageData(e,t,1,1).data[0],o=y.getImageData(e,t,1,1).data[1],a=y.getImageData(e,t,1,1).data[2],i=y.getImageData(e,t,1,1).data[3]},r=function(){if(t){var e=2*Math.random()*T-T;d.fillStyle="rgba("+Math.round(n-n*e)+", "+Math.round(o-o*e)+", "+Math.round(a-a*e)+", "+i/255+")"}else d.fillStyle="rgba("+n+", "+o+", "+a+", "+i/255+")"},s=0;s<B.length;s++)e==B[s]&&e.r%2==0&&B[s+g+1]&&e.c<g-1&&(u(Math.round(e.c/g*c),Math.round(e.r/m*h+2*x/3)),r(),d.beginPath(),d.moveTo(e.x,e.y),d.lineTo(B[s+g].x,B[s+g].y),d.lineTo(B[s+g+1].x,B[s+g+1].y),d.closePath(),d.fill(),u(Math.round(e.c/g*c+x/2),Math.round(e.r/m*h+x/3)),r(),d.beginPath(),d.moveTo(e.x,e.y),d.lineTo(B[s+1].x,B[s+1].y),d.lineTo(B[s+g+1].x,B[s+g+1].y),d.closePath(),d.fill()),e==B[s]&&e.r%2!=0&&B[s+g+1]&&e.c>0&&(u(Math.round((e.c-1)/g*c),Math.round(e.r/m*h+x/3)),r(),d.beginPath(),d.moveTo(e.x,e.y),d.lineTo(B[s-1].x,B[s-1].y),d.lineTo(B[s+g-1].x,B[s+g-1].y),d.closePath(),d.fill(),u(Math.round((e.c-1)/g*c+x/2),Math.round(e.r/m*h+2*x/3)),r(),d.beginPath(),d.moveTo(e.x,e.y),d.lineTo(B[s+g-1].x,B[s+g-1].y),d.lineTo(B[s+g].x,B[s+g].y),d.closePath(),d.fill())}function o(t){B=[];for(var n,a=0,o=0,i=0;i<t;i++)n=new e,a%2==0?(n.x=o*x-x,n.x=n.x+(Math.random()-.5)*M*x*2):(n.x=o*x-x-x/2,n.x=n.x+(Math.random()-.5)*M*x*2),n.y=a*x*.866-x,n.y=n.y+(Math.random()-.5)*M*x*2,n.r=a,n.c=o,B.push(n),o+=1,(i+1)%g==0&&(a+=1,o=0)}function i(e){!0===e||(x=3*r.value+30,M=u.value/100,c=l.width+2*x,h=l.height+2*x,g=Math.ceil(c/x)+2,m=Math.ceil(h/(.865*x)),o(g*m)),T=s.value/100,d.clearRect(0,0,l.width,l.height),t(d,l);for(var i=0;i<B.length;i++)a(B[i],!0);n(),w.style.display="none"}var l,d,c,h,u,r,g,m,s,y,v,f,E,w,I,p,B=[],x=50,M=.2,T=.5,L=["#22bbee","#8855cc","#ee2266","#ee7722"];document.addEventListener("DOMContentLoaded",function(){l=document.getElementById("canvas"),r=document.getElementById("cell-size"),u=document.getElementById("variance"),s=document.getElementById("oamount"),v=document.getElementById("save"),d=l.getContext("2d"),f=document.getElementById("canvas2"),E=f.getContext("2d"),I=document.getElementById("numColours"),(p=document.getElementById("preset-size")).addEventListener("change",function(){var e=p.value.split("-");console.log(e),document.getElementById("width").value=parseInt(e[0]),document.getElementById("height").value=parseInt(e[1])},!1);var e=function(e,t){l.width=e,l.height=t,c=l.width+2*x,h=l.height+2*x,f.width=l.width,f.height=l.height,document.getElementById("width").value=e,document.getElementById("height").value=t},n=function(){for(var e=0;e<I.value;e++){var n=document.createElement("input");n.type="color",n.id="colour"+(e+1),document.getElementById("colour-div").appendChild(n),document.getElementById("num-colours").innerHTML=I.value,n.value=L[e],n.addEventListener("change",function(){t(E,f),w.style.display="",window.setTimeout(function(){i()},2)},!1)}};n(),e(1280,720),t(E,f),w=document.getElementById("loader"),i(),I.addEventListener("change",function(){document.getElementById("colour-div").innerHTML="",n(),t(E,f),w.style.display="",window.setTimeout(function(){i()},0)},!1),r.addEventListener("change",function(){w.style.display="",window.setTimeout(function(){i()},0)},!1),u.addEventListener("change",function(){w.style.display="",window.setTimeout(function(){i()},0)},!1),s.addEventListener("change",function(){w.style.display="",window.setTimeout(function(){i(!0)},0)},!1),document.getElementById("size-btn").addEventListener("click",function(){var n=document.getElementById("width").value,a=document.getElementById("height").value;e(n,a),t(E,f),console.log(n+" : "+a),i()})},!1)}();
//# sourceMappingURL=main.min.js.map
